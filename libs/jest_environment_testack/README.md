# jest-environment-testack

<p align=center>
  <img alt="Testack.js Schematic Logo" src=".github/assets/testack-logo.svg" width=200 />
  <img alt="Cucumber.js Schematic Logo" src=".github/assets/jest-logo.png" width=200 />
</p>

[![Build Status][build-badge]][build]
[![version][version-badge]][package]
[![Discord][discord-badge]][discord]
[![MIT License][license-badge]][license]

**[Testack](https://testackjs.org)** environment for Jest. Testack.js is an integrated test framework for performing automated end-to-end testing on web applications and websites, across all major browsers.

```
npm install jest-environment-testack
```

## Usage:
Update your [Jest configuration](https://jestjs.io/docs/configuration):

```js
{
  testEnvironment: 'jest-environment-testack',
  projectConfig: {
    testEnvironmentOptions: {
      providers: [ {provider: "MongoDB"} ],
      actions: [{
        event: "setup",
        provider: "MongoDB",
        method: "reset"
      }]
    },
  }
}
```

## Testack options

| Name| Type | Description | Default |
|:--- | :--- | :--- | :---: |
| **`verbose`** | Boolean  | Enable complete Testack http logs. | `false` |
| **`output`** | Boolean  | Show Testack output. | `true` |
| **`env`** | String  | Testack test environment to use, from `testack.conf.js`. Learn more about test environments in the [Testack docs](https://v2.testackjs.org/guide/using-testack/concepts.html#defining-test-environments). | none |
| **`parallel`** | Boolean  | Set this to true when running tests in parallel | `false` |
| **`persistGlobals`** | Boolean  | Persist the same globals object between runs or have a (deep) copy of it per each test. Learn more about test globals in the [Testack docs](https://v2.testackjs.org/guide/using-testack/concepts.html#using-test-globals).| `true` |
| **`configFile`** | String  | The Testack config file to use. A config file will be auto-generated by default, but this allows you to change that. Learn more about the Testack config in the [Testack docs](https://v2.testackjs.org/guide/configuration/overview.html). | `./testack.conf.js` |
| **`timeout`** | Number  | Set the global timeout for assertion retries before an assertion fails.  | `5000` |



you can also use the `jest-environment-testack` for only a specific suite case:
```
/**
 * @jest-environment jest-environment-testack
 */
  it('use jest-environment-testack in this test file', function() {
    expect(global.testack).toBeDefined();
  });
```

## jest test suite life cycle
setup
add_hook
start_describe_definition
add_test
finish_describe_definition
run_start
run_describe_start
hook_start
hook_success
test_fn_start
test_fn_success
test_done
run_describe_finish
run_finish
teardown


### `global.testack`

The Jest environment used the Testack [programmatic API](https://v2.testackjs.org/api/programmatic/) to create the Testack instance and export the browser API. 

Available properties/methods:
- `.element(<locator>)` - use the Testack [.element() API](https://v2.testackjs.org/api/element/) to locate elements in the page;
- `.updateCapabilities({ capabilities })` - used when `autoStartSession` is off in order to update the capabilities at run-time;
- `.launchBrowser()` - used when `autoStartSession` is off in order to start the session and open the browser;
- `.settings` - the Testack settings object;
- `.testack_client` - the Testack (internal) instance.


## License
MIT

[build-badge]: https://github.com/testackjs/jest-environment-testack/actions/workflows/node.js.yml/badge.svg?branch=main
[build]: https://github.com/testackjs/jest-environment-testack/actions/workflows/node.js.yml
[version-badge]: https://img.shields.io/npm/v/jest-environment-testack.svg?style=flat-square
[package]: https://www.npmjs.com/package/jest-environment-testack
[license-badge]: https://img.shields.io/npm/l/jest-environment-testack.svg?style=flat-square
[license]: https://github.com/testackjs/jest-environment-testack/blob/main/LICENSE
[discord-badge]: https://img.shields.io/discord/618399631038218240.svg?color=7389D8&labelColor=6A7EC2&logo=discord&logoColor=ffffff&style=flat-square
[discord]: https://discord.gg/SN8Da2X

